<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Vote with friends page</title>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!--  <link rel="stylesheet" href="assets/style.css"> -->
</head>
<body>

<div class="container">

  <!-- Input for activity -->
    <div class="col-lg-6">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Food">
          <span class="input-group-btn">
            <button class="btn btn-default" id = "food-choice" type="button">Go!</button>
          </span>
        </div>
     </div>
     <div class="col-lg-6">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Food">
          <span class="input-group-btn">
            <button class="btn btn-default" id = "food-choice2" type="button">Go!</button>
          </span>
        </div>
     </div>
  <!-- Input for Food -->
    <div class="col-lg-6">
        <div class="input-group">
           <input type="text" class="form-control" id = "activity-input" placeholder="Activity">
           <span class="input-group-btn">
            <button class="btn btn-default" id = "activity-choice" type="button">Go!</button>
           </span>
       </div>
    </div>
    <div class="col-lg-6">
        <div class="input-group">
           <input type="text" class="form-control" id = "activity-input2" placeholder="Activity">
           <span class="input-group-btn">
            <button class="btn btn-default" id = "activity-choice2" type="button">Go!</button>
           </span>
       </div>
    </div>

    <!--Display user input -->
    <div class="results">
      <div class="food"></div>
      <div class="activity"></div>
    </div>

    <!-- Thumbs up Button/Down -->
    <div id = "Yes"> <button type="button" class="btn btn-default btn-lg">
        <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Thumbs Up
      </button>
    </div>
    <div id = "No"> <button type="button" class="btn btn-default btn-lg">
        <span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span> Thumbs Down
      </button>
    </div>

    <!-- Display voting results -->
    <div class = "Results-Div"> <h2> Results</h2>
      <div id = "results"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <!-- <script type="text/javascript" src="assets/script.js"></script> 
    <script type="text/javascript" src="assets/goingOutMovie.js"></script> -->
    <script>
    
    // Initialize Firebase
    var config = {
    apiKey: "AIzaSyBexNmapKolINtyUFngltIb-2vlLWB3H4w",
    authDomain: "class-pr.firebaseapp.com",
    databaseURL: "https://class-pr.firebaseio.com",
    projectId: "class-pr",
    storageBucket: "",
    messagingSenderId: "583763053083"
    };
    firebase.initializeApp(config);

    //Create vriable to reference database
    var database = firebase.database();

//Initial Value of counters
var yesStart = 0;
var noStart = 0;

//Counter variables set equal to intial value
var yes = yesStart;
var no = noStart;


//When user clicks go
$('#activity-choice').on("click", function(){
  $('#.food').text(activity-input)
})

//When the user clicks a button 
$('#Yes').on("click", function(){
  event.preventDefault();
  //Add one to yes counter
  if(!yes){
    yes = 0;
  }
  yes ++;

  //Create limit for counter
  if (yes === 20){
    console.log("Too many votes");
    yes = 0;
    no=0;
  }

  //Save new value to firebase
  database.ref().set({
    yes:yes,
    no:no
  });
  
  //Log value of yes counter
  console.log(yes);

});

//When the user clicks a button 
$('#No').on("click", function(){
  event.preventDefault();
  //Add one to no counter
  if(!no){
    no = 0;
  }
  no ++;

  //Create limit for counter
  if (no === 20){
    console.log("Too many votes");
    no = 0;
    yes=0;
  }

  //Save new value to firebase
  database.ref().set({
    no:no,
    yes:yes

  });
  
  //Log value of yes counter
  console.log(no);

});

database.ref().on('value', function(snapshot){

  //Console log out value
  console.log(snapshot.val());

  //Change value of of yes and no to match database
   yes = snapshot.val().yes;
   no = snapshot.val().no;

  //Update HTML
  $('#results').text("Thumbs Up: " + snapshot.val().yes + " Thumbs Down: " + snapshot.val().no);

  //It erros
}, function(errorObject){
  console.log("Failed" + errorObject.code);
});


  </script>

</body>
</html>